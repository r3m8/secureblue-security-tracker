{
  "description": "In the Linux kernel, the following vulnerability has been resolved:  sfc: fix kernel panic when creating VF  When creating VFs a kernel panic can happen when calling to efx_ef10_try_update_nic_stats_vf.  When releasing a DMA coherent buffer, sometimes, I don't know in what specific circumstances, it has to unmap memory with vunmap. It is disallowed to do that in IRQ context or with BH disabled. Otherwise, we hit this line in vunmap, causing the crash:   BUG_ON(in_interrupt());  This patch reenables BH to release the buffer.  Log messages when the bug is hit:  kernel BUG at mm/vmalloc.c:2727!  invalid opcode: 0000 [#1] PREEMPT SMP NOPTI  CPU: 6 PID: 1462 Comm: NetworkManager Kdump: loaded Tainted: G          I      --------- ---  5.14.0-119.el9.x86_64 #1  Hardware name: Dell Inc. PowerEdge R740/06WXJT, BIOS 2.8.2 08/27/2020  RIP: 0010:vunmap+0x2e/0x30  ...skip...  Call Trace:   __iommu_dma_free+0x96/0x100   efx_nic_free_buffer+0x2b/0x40 [sfc]   efx_ef10_try_update_nic_stats_vf+0x14a/0x1c0 [sfc]   efx_ef10_update_stats_vf+0x18/0x40 [sfc]   efx_start_all+0x15e/0x1d0 [sfc]   efx_net_open+0x5a/0xe0 [sfc]   __dev_open+0xe7/0x1a0   __dev_change_flags+0x1d7/0x240   dev_change_flags+0x21/0x60   ...skip...",
  "scope": "local",
  "releases": {
    "bookworm": {
      "status": "resolved",
      "repositories": {
        "bookworm": "6.1.148-1",
        "bookworm-security": "6.1.158-1"
      },
      "fixed_version": "5.18.14-1",
      "urgency": "not yet assigned"
    },
    "bullseye": {
      "status": "resolved",
      "repositories": {
        "bullseye": "5.10.223-1",
        "bullseye-security": "5.10.244-1"
      },
      "fixed_version": "5.10.136-1",
      "urgency": "not yet assigned"
    },
    "forky": {
      "status": "resolved",
      "repositories": {
        "forky": "6.16.12-2"
      },
      "fixed_version": "5.18.14-1",
      "urgency": "not yet assigned"
    },
    "sid": {
      "status": "resolved",
      "repositories": {
        "sid": "6.17.7-2"
      },
      "fixed_version": "5.18.14-1",
      "urgency": "not yet assigned"
    },
    "trixie": {
      "status": "resolved",
      "repositories": {
        "trixie": "6.12.43-1",
        "trixie-security": "6.12.48-1"
      },
      "fixed_version": "5.18.14-1",
      "urgency": "not yet assigned"
    }
  }
}